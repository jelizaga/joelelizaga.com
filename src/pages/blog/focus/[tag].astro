---
////////////////////////////////////////////////////////////////////////////////
// /src/pages/blog/focus/[tag].astro ///////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
// Generates pages @ `/blog/focus/[tag]` for every unique blog post tag.

import Layout from "../../../layouts/Layout.astro";
import BlogCard from "../../../components/BlogCard.astro";
import Pagination from "../../../components/Pagination.astro";
import Header from "../../../components/Header.astro";

export async function getStaticPaths() {
  const blogPosts = await Astro.glob("../../../blog/*.mdx");
  const uniqueTags = [...new Set(blogPosts.map((blogPost) => blogPost.frontmatter.tags).flat())];
  return uniqueTags.map((tag) => {
    const tagSpecificPosts = blogPosts.filter((blogPost) => blogPost.frontmatter.tags.includes(tag));
    return {
      params: { tag },
      props: { blogPosts: tagSpecificPosts },
    };
  })
}
const { tag } = Astro.params;
const { blogPosts } = Astro.props;


const title = `Joel Elizaga | Blog | ${tag}`;
---

<Layout
  title={title}
  currentPage={"blog"}
>
  <Header
    heading="Blog"
    headingIcon="fa-solid fa-atlas"
    focus={tag}
    bgSrc="/img/placeholder/placeholder2.jpg"
    slug="/blog"
  />
  <section class="centered">
    <ul class="blog">
      {blogPosts.map(blogPost => (
        <BlogCard
          slug={`/blog/${blogPost.frontmatter.slug}`}
          title={blogPost.frontmatter.title}
          description={blogPost.frontmatter.description}
          img={blogPost.frontmatter.img}
          pubDate={blogPost.frontmatter.pubDate}
          tags={blogPost.frontmatter.tags}
        />
      ))}
    </ul>
  </section>
</Layout>

<style>
  .blog {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  main {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  h1 {
    font-size: clamp(42px, 3.3333vw, 3.3333vw);
    line-height: clamp(66px, 5.20833vw, 5.20833vw);
  }

  @media screen and (max-width: 1120px) {

    h1 {
      font-size: clamp(33px, 2.604166vw, 2.604166vw);
      line-height: clamp(53px, 4.16666vw, 4.16666vw);;
    }

  }

  @media screen and (max-width: 890px) {

    h1 {
      font-size: clamp(26px, 2.03125vw, 2.03125vw);
      line-height: clamp(42px, 3.3333vw, 3.3333vw);
    }
    
  }
</style>